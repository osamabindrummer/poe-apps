<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparador: Comprar vs Arrendar e Invertir</title>
    <link rel="stylesheet" href="assets/css/compraroarrendar.css">
</head>
<body>
    <div class="header">
        <h1>Comprar vs Arrendar e Invertir</h1>
        <p>Compara las dos opciones y toma la mejor decisi√≥n financiera</p>
    </div>

    <div class="comparison-container">
        <!-- Panel Izquierdo: Comprar -->
        <div class="panel buy-panel">
            <div class="panel-header">
                <div class="icon">üè†</div>
                <h2>Comprar Propiedad</h2>
                <p>Cr√©dito hipotecario</p>
            </div>
            <div class="panel-content">
                <div class="input-group home-price-group">
                    <div class="home-price-field">
                        <label for="homePrice" id="homePriceLabel" data-home-price-label>Valor de la Propiedad (CLP)</label>
                        <input type="text" id="homePrice" class="currency-input" placeholder="Ej: 100.000.000" data-home-price-input>
                    </div>
                    <div class="currency-toggle-column currency-toggle" role="group" aria-label="Selecciona la moneda del valor de la propiedad">
                        <span class="currency-toggle-label">CLP</span>
                        <label class="switch">
                            <input type="checkbox" id="dividendCurrencyToggle" aria-label="Alternar valor de la propiedad entre CLP y UF">
                            <span class="slider"></span>
                        </label>
                        <span class="currency-toggle-label">UF</span>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="downPayment">Pie inicial 20% (CLP)</label>
                    <input type="text" id="downPayment" class="currency-input" placeholder="Ej: 20.000.000">
                </div>
                
                <div class="input-group">
                    <label for="interestRate">Tasa de Inter√©s Anual (%) ‚Äì <a href="https://si3.bcentral.cl/Siete/ES/Siete/Cuadro/CAP_TASA_INTERES/MN_TASA_INTERES_09/TSF_27A/T5224" target="_blank" rel="noopener noreferrer">Datos Banco Central</a></label>
                    <input type="number" id="interestRate" placeholder="Ej: 5" step="0.01" value="5">
                </div>
                
                <div class="input-group">
                    <label for="loanTerm">Plazo del Cr√©dito (a√±os)</label>
                    <input type="number" id="loanTerm" placeholder="Ej: 25" value="25">
                </div>

                <div class="input-group hidden" data-uf-input-group>
                    <label for="ufValue">Valor UF actual (CLP)</label>
                    <input type="number" id="ufValue" min="1" step="0.01" value="36000">
                    <p class="helper-text">Se proyecta un crecimiento anual de 3,5&nbsp;%.</p>
                </div>

                <button type="button" class="calculate-btn">Calcular Compra</button>

                <div class="monthly-payment-container">
                    <h3>Dividendo mensual estimado</h3>
                    <div class="amount"><span id="monthlyPaymentPrefix">$</span><span id="monthlyPayment">0</span></div>
                    <p class="helper-text" id="monthlyPaymentExplanation"></p>
                    <p class="helper-text" id="monthlyPaymentRentHint"></p>
                </div>

                <div class="results-summary">
                    <div class="result-card">
                        <h3>Pie Inicial</h3>
                        <div class="value">$<span id="downPaymentResult">0</span></div>
                    </div>
                    <div class="result-card">
                        <h3 id="totalCostLabel">Costo Total</h3>
                        <div class="value">$<span id="totalCostBuy">0</span></div>
                        <p class="helper-text" id="totalCostHelper"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Panel Derecho: Arrendar e Invertir -->
        <div class="panel rent-panel">
            <div class="panel-header">
                <div class="icon">üìà</div>
                <h2>Arrendar e Invertir</h2>
                <p>Invertir la diferencia</p>
            </div>
            <div class="panel-content">
                <div class="input-group">
                    <label for="monthlyRent">Arriendo Mensual (CLP)</label>
                    <input type="text" id="monthlyRent" class="currency-input" placeholder="Ej: 800.000">
                </div>
                
                <div class="input-group">
                    <label for="initialInvestment">Inversi√≥n Inicial (CLP)</label>
                    <input type="text" id="initialInvestment" placeholder="Autom√°tico desde pie inicial" readonly class="readonly-input">
                </div>
                
                <div class="input-group">
                    <label for="monthlyInvestment">Inversi√≥n Mensual Adicional (CLP)</label>
                    <input type="text" id="monthlyInvestment" placeholder="Se calcula autom√°ticamente" readonly class="readonly-input">
                </div>
                
                <div class="input-group">
                    <label for="annualReturn">Rentabilidad Anual (%)</label>
                    <input type="number" id="annualReturn" placeholder="Ej: 7" step="0.1" value="7">
                </div>

                <button type="button" class="calculate-btn">Calcular Inversi√≥n</button>
                
                <div class="results-summary">
                    <div class="result-card">
                        <h3>Total Arriendos</h3>
                        <div class="value">$<span id="totalRent">0</span></div>
                    </div>
                    <div class="result-card">
                        <h3>Total Aportes</h3>
                        <div class="value">$<span id="totalInvested">0</span></div>
                    </div>
                    <div class="result-card">
                        <h3>Valor Final Inversi√≥n</h3>
                        <div class="value">$<span id="finalInvestmentValue">0</span></div>
                    </div>
                </div>
                
                <div class="callout">
                    <span class="icon">üí°</span>
                    <span>Si el dividendo es mayor que el arriendo, usamos la diferencia como propuesta de inversi√≥n mensual.</span>
                </div>
            </div>
        </div>

        <!-- Secci√≥n de Comparaci√≥n -->
        <div class="comparison-section">
            <h2 class="comparison-header">üèÜ Comparaci√≥n Final</h2>
            <div class="scenarios">
                <div class="scenario-card scenario-card-buy">
                    <h3>üìä Escenario: Comprar Propiedad</h3>
                    <p id="buyScenario">Completa los datos para ver el an√°lisis...</p>
                </div>
                
                <div class="scenario-card scenario-card-rent">
                    <h3>üìà Escenario: Arrendar e Invertir</h3>
                    <p id="rentScenario">Completa los datos para ver el an√°lisis...</p>
                </div>
            </div>
            
            <div class="comparison-results">
                <div class="comparison-item" id="buyComparison">
                    <h4>Patrimonio al Comprar</h4>
                    <div class="value" id="buyPatrimony">$0</div>
                    <p class="helper-text">Valor final de la propiedad con apreciaci√≥n</p>
                </div>
                
                <div class="comparison-item" id="rentComparison">
                    <h4>Patrimonio al Arrendar</h4>
                    <div class="value" id="rentPatrimony">$0</div>
                    <p class="helper-text">Valor final de la inversi√≥n</p>
                </div>
                
                <div class="comparison-item difference-item" id="differenceComparison">
                    <h4>Diferencia</h4>
                    <div class="value" id="difference">$0</div>
                    <p class="helper-text">Distancia entre ambos patrimonios</p>
                </div>
            </div>

            <div class="recommendation" id="recommendation">Completa los datos para ver la recomendaci√≥n.</div>
        </div>
    </div>
    <script src="assets/js/compraroarrendar.js"></script>
</body>
</html>
